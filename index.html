<!DOCTYPE html><html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Преобразователь расписания</title><script src="https://cdn.tailwindcss.com"></script><style>.subject-item{border-left:4px solid transparent;transition:all .2s ease}.subject-item:hover{border-left-color:#6366f1;background-color:rgba(99,102,241,.05)}.distant-text{color:#3b82f6;font-weight:600}.day-card{transition:all .3s ease}.day-card:hover{transform:translateY(-5px);box-shadow:0 10px 25px -5px rgba(0,0,0,.1)}.footer{margin-top:2rem;padding:1rem;background-color:#f8fafc;border-radius:.5rem;border:1px solid #e2e8f0}.dark .footer{background-color:#1e293b;border-color:#334155}</style></head><body class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200 min-h-screen p-4"><div class="container mx-auto max-w-4xl"><h1 class="text-2xl font-bold mb-4 text-center" style="color:#e44">Расписание</h1><textarea id="input" class="w-full h-48 p-3 border rounded-lg mb-4 bg-white dark:bg-gray-800" placeholder="ВНИМАНИЕ: для красоты там где дистант напишите символ*"></textarea><div class="flex justify-center gap-4 mb-6"><button onclick="parseAndRender()" class="text-white px-6 py-2 rounded-lg hover:opacity-90 transition" style="background-color:#e44">Сгенерировать расписание</button></div><div id="schedule" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div><div class="text-center mt-4"><div class="flex items-center justify-center space-x-2 text-gray-600 dark:text-gray-400"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.562 8.139l-1.76 8.327c-.125.565-.459.7-1.084.437l-3-2.21-1.447 1.394c-.159.159-.295.295-.605.295l.213-3.04 5.56-5.022c.241-.213-.054-.334-.373-.121l-6.87 4.326-2.96-.924c-.643-.203-.656-.643.136-.95l11.57-4.461c.536-.193 1.006.128.832.941z"/></svg> <span class="font-medium">@webshic</span></div></div></div><script>const subjectMap = {
      "Иностранный язык в профессиональной деятельности": "Английский",
      "Основы алгоритмизации и программирования": "Алгоритмы",
      "Правовое обеспечение профессиональной деятельности": "Право",
      "МДК.09.02 Оптимизация веб-приложений": "МДК 09.02",
      "МДК 09.02 Оптимизация веб-приложений": "МДК 09.02",
      "МДК 09.01 Проектирование и разработка веб-приложений": "МДК 09.01 КП",
      "МДК 09.01": "МДК 09.01 КП",
      "МДК 09.03 Тестирование веб-приложений": "МДК 09.03",
      "МДК 09.03": "МДК 09.03",
      "МДК 09.04 Обеспечение безопасности веб-приложений": "МДК 09.04",
      "Менеджмент в профессиональной деятельности": "Менеджмент",
      "Психология общения": "Психология",
      "Экономика отрасли": "Экономика",
      "Физическая культура": "Физ-ра",
      "Основы алгоритмизации": "Алгоритмы",
      "РОВ": "РОВ",
      "ДОП": "ДОП",
      "МДК 12.02 Поддержка информационных процессов в цифровой экономике": "МДК 12.02",
      "Стандартизация, сертификация и техническое документоведение": "Стандартизация"

    };
    const daysOfWeek = ["Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"];

    function preprocessInput(text) {
      let lines = text.split('\n');
      let processedLines = [];
      
      for (let line of lines) {
        const trimmedLine = line.trim();
        if (!trimmedLine) continue;

        let processedLine = trimmedLine;
        if (processedLine.includes('РОВ') && !processedLine.match(/^\d+\.\s*РОВ/)) {
          processedLine = processedLine.replace('РОВ', '0. РОВ');
        }

        if (processedLine.includes('0. РОВ') && processedLine.includes('4.')) {
          const parts = processedLine.split(/(?=4\.)/);
          processedLines.push(...parts);
        } else {
          processedLines.push(processedLine);
        }
      }
      
      return processedLines.join('\n');
    }

    function normalizeSubject(subject) {
      for (const [key, value] of Object.entries(subjectMap)) {
        if (subject.includes(key)) return value;
      }
      return subject;
    }

    function extractTeacher(text) {
      const match = text.match(/([А-ЯЁ][а-яё\-]+)\s+([А-ЯЁ]\.[А-ЯЁ]\.)/);
      return match ? `${match[1]} ${match[2]}` : "";
    }

    function extractRoom(text) {
      if (text.includes("*")) return "— ДИСТАНТ";
      if (/Спортивный зал/i.test(text)) return "— Спортзал";
      if (/Актовый зал/i.test(text)) return "— Актовый";
      
      if (text.includes("РОВ")) {
        const roomMatch = text.match(/Аудитория\s*(\d+)/i);
        if (roomMatch) {
          return `— каб. ${roomMatch[1]}`;
        }
        return "— каб.";
      }
      
      const match = text.match(/Аудитория\s*(\d{1,4})/i);
      return match ? `— каб. ${match[1]}` : "";
    }

    function parseAndRender() {
      let inputText = document.getElementById("input").value;
      
      inputText = preprocessInput(inputText);
      
      const scheduleContainer = document.getElementById("schedule");
      scheduleContainer.innerHTML = "";
      const lines = inputText.split("\n");
      const scheduleByDay = {};
      let currentDay = null;

      for (const line of lines) {
        const trimmedLine = line.trim();
        if (!trimmedLine) continue;

        const dayMatch = daysOfWeek.find(day => trimmedLine.toLowerCase().includes(day.toLowerCase()));
        if (dayMatch) {
          currentDay = dayMatch;
          scheduleByDay[currentDay] = [];
          continue;
        }

        if (currentDay) {
          const pairRegex = /^(\d+)\.\s*(.+)/;
          const match = trimmedLine.match(pairRegex);
          if (match) {
            const pairNumber = match[1];
            const pairInfo = match[2];
            const subject = normalizeSubject(pairInfo);
            const teacher = extractTeacher(pairInfo);
            const roomText = extractRoom(pairInfo);
            const isDistant = roomText.includes("ДИСТАНТ");

            scheduleByDay[currentDay].push({
              number: pairNumber,
              subject,
              roomText,
              teacher,
              isDistant
            });
          }
        }
      }

      for (const day of daysOfWeek) {
        if (!scheduleByDay[day] || !scheduleByDay[day].length) continue;

        const dayCard = document.createElement("div");
        dayCard.className = "day-card bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden";

        const dayHeader = document.createElement("div");
        dayHeader.className = "px-4 py-3 text-center text-white";
        dayHeader.style.backgroundColor = "#EE4444";
        dayHeader.innerHTML = `<h2 class="text-lg font-semibold">${day}</h2>`;
        dayCard.appendChild(dayHeader);

        const dayBody = document.createElement("div");
        dayBody.className = "p-4 space-y-2";

        for (const pair of scheduleByDay[day]) {
          const pairElement = document.createElement("div");
          pairElement.className = `subject-item p-3 rounded-lg bg-gray-50 dark:bg-gray-700 ${pair.isDistant ? "distant-item" : ""}`;

          let roomDisplay = pair.isDistant
            ? `<span class='distant-text'>${pair.roomText}</span>`
            : pair.roomText;

          let teacherText = pair.teacher
            ? `<p class="text-sm text-gray-600 dark:text-gray-300">${pair.teacher}</p>`
            : "";

          pairElement.innerHTML = `
            <h3 class="font-medium" style="color: #EE4444;">
              ${pair.number}. ${pair.subject} ${roomDisplay}
            </h3>
            ${teacherText}
          `;
          dayBody.appendChild(pairElement);
        }
        dayCard.appendChild(dayBody);
        scheduleContainer.appendChild(dayCard);
      }
    }</script></body></html>

